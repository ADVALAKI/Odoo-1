<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="dating_event_likes_email" model="mail.template">
        <field name="name">Dating Event Likes</field>
        <field name="model_id" ref="event.model_event_registration"></field>
        <field name="email_from">${(object.event_id.organizer_id.email or object.event_id.user_id.email or '')|safe}</field>
        <field name="email_to">${object.partner_id.email}</field>
        <field name="auto_delete" eval="False"/>
        <field name="subject">Who did you like at the event?</field>
        <field name="body_html"><![CDATA[
                <p>Hello ${object.partner_id.name},</p>
                <p>Thank you for attending the dating event at ${object.event_id.address_id.street} ${object.event_id.address_id.city}, ${object.event_id.address_id.state_id.name} on ${object.event_id.date_begin}</p>
                <p>We would like to get your feedback so we can better tailor our service to you.</p>
                <p><a href="/dating/events/feedback/${object.id}">Provide Feedback</a></p>
            ]]>
        </field>
    </record>
    
    <template id="dating_events_feedback" name="Dating Event Feedback" page="True">
        <t t-call="website.layout">
            <div class="container">
                <h1 class="text-center">Event Feedback</h1>
                
                <form method="POST" t-attf-action="/dating/events/feedback/#{reg.id}/process" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <div class="form-group">
			    <label for="venue_feedback">What did you think of the venue?</label>
			    <textarea name="venue_feedback" class="form-control" required="True"/>
			</div>
			<div class="form-group">
                            <label for="venue_feedback_rating">Please rate the venue out of 5</label>
                            <input type="number" name="venue_feedback_rating" class="form-control" required="True"/>
                        </div>
                        <div class="form-group">
                            <label for="event_feedback">Please describe what you thought of the event</label>
                            <textarea name="event_feedback" class="form-control" required="True"/>
                        </div>
                        <div class="form-group">
			    <label for="event_feedback_rating">Please rate the event out of 5</label>
			    <input type="number" name="event_feedback_rating" class="form-control" required="True"/>
                        </div>
                        <div class="form-group">
                            <label for="feedback_people">What did you think of the other singles?</label><br/>
                            <t t-foreach="singles" t-as="single">
                                <t t-esc="single.partner_id.first_name"/> <input type="radio" t-attf-name="single_#{single.id}" value="Like"/> Like <input type="radio" t-attf-name="single_#{single.id}" value="" selected="selected"/> Neutral <input type="radio" t-attf-name="single_#{single.id}" value="Dislike"/> Dislike<br/>
                            </t>
                        </div>
                        <button t-attf-class="btn btn-primary btn-lg">Submit Feedback</button>
                    </form>                
                
            </div>
        </t>
    </template>
   
    
    <template id="dating_events" name="Dating Profiles" page="True">
        <title>Singles Events in <t t-esc="state_name"/></title>
        <t t-call="website.layout">
            <div class="container">
                <h1 class="text-center">Single Events</h1>
                <t t-foreach="dating_events" t-as="dating_event">
                    <div class="panel panel-default"><div class="panel-body">
                        <t t-esc="dating_event.name"/><br/>
                        Age: <t t-esc="dating_event.min_age"/> - <t t-esc="dating_event.max_age"/><br/>
                        Location: <t t-esc="dating_event.address_id.name"/> <t t-esc="dating_event.address_id.street"/>, <t t-esc="dating_event.address_id.city"/>, <t t-esc="dating_event.address_id.state_id.name"/>, <t t-esc="dating_event.address_id.country_id.name"/><br/>
                        Time: <t t-esc="dating_event.date_begin"/> - <t t-esc="dating_event.date_end"/><br/>
                        Male: <t t-esc="dating_event.current_males"/> / <t t-esc="dating_event.max_males"/><br/>
                        Female: <t t-esc="dating_event.current_females"/> / <t t-esc="dating_event.max_females"/><br/>
                        <t t-esc="dating_event.dating_description"/><br/>
                        <a t-attf-href="/dating/events/register/#{slug(dating_event)}"><button type="button" class="btn btn-default">Register</button></a>
                    </div></div>
                </t>
            </div>
        </t>
    </template>
    
</odoo>