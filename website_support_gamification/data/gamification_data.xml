<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data noupdate="1">

        <!-- badges -->
        <record id="badge_first_closed_ticket" model="gamification.badge">
            <field name="name">First Support Ticket Closed</field>
            <field name="description">Closed you first support ticket</field>
            <field name="rule_auth">nobody</field>
            <!--<field name="image" type="base64" file="gamification/static/img/badge_good_job-image.png"/>-->
        </record>

        <record id="badge_fith_closed_ticket" model="gamification.badge">
            <field name="name">Closed 5 Support Tickets</field>
            <field name="description">Closed 5 Support tickets</field>
            <field name="rule_auth">nobody</field>
        </record>

        <record id="badge_fith_closed_ticket" model="gamification.badge">
            <field name="name">Closed 5 Support Tickets</field>
            <field name="description">Closed 5 Support tickets</field>
            <field name="rule_auth">nobody</field>
        </record>

        <record id="badge_one_hour_on_support_tickets" model="gamification.badge">
            <field name="name">Spent 1 hour on support tickets</field>
            <field name="description">Spent 1 hour on support tickets</field>
            <field name="rule_auth">nobody</field>
        </record>
        
        <!-- goal definitions -->
        <record model="gamification.goal.definition" id="definition_close_support_ticket">
            <field name="name">Close Support Ticket</field>
            <field name="description"></field>
            <field name="computation_mode">count</field>
            <field name="model_id" eval="ref('website_support.model_website_support_ticket')" />
            <field name="domain">[('closed_by_id',"=",user.id)]</field>
        </record>

        <record model="gamification.goal.definition" id="definition_time_on_support_ticket">
            <field name="name">Time on Support Ticket</field>
            <field name="description"></field>
            <field name="computation_mode">sum</field>
            <field name="model_id" eval="ref('website_support_analytic_timesheets.model_account_analytic_line')" />
            <field name="field_id" eval="ref('analytic.field_account_analytic_line_unit_amount')" />
            <field name="domain">[('user_id',"=",user.id), ('support_ticket_id','!=', False)]</field>
        </record>
        
        <!-- Close First Ticket Challenge -->
        <record model="gamification.challenge" id="challenge_first_closed_ticket">
            <field name="name">Close First Support Ticket</field>
            <field name="user_domain" eval="str([('groups_id', '=', ref('base.group_user'))])" />
            <field name="state">inprogress</field>
            <field name="reward_id" eval="ref('badge_first_closed_ticket')"/>
        </record>
        <record model="gamification.challenge.line" id="line_challenge_first_closed_ticket1">
            <field name="definition_id" eval="ref('definition_close_support_ticket')" />
            <field name="target_goal">1</field>
            <field name="challenge_id" eval="ref('challenge_first_closed_ticket')" />
        </record>

        <!-- Close Fifth Ticket Challenge -->
        <record model="gamification.challenge" id="challenge_close_five_support_tickets">
            <field name="name">Close Five Support Tickets</field>
            <field name="user_domain" eval="str([('groups_id', '=', ref('base.group_user'))])" />
            <field name="state">inprogress</field>
            <field name="reward_id" eval="ref('badge_fith_closed_ticket')"/>
        </record>
        <record model="gamification.challenge.line" id="line_challenge_close_five_support_tickets1">
            <field name="definition_id" eval="ref('definition_close_support_ticket')" />
            <field name="target_goal">5</field>
            <field name="challenge_id" eval="ref('challenge_close_five_support_tickets')" />
        </record>

        <!-- Spend 1 hour on support tickets -->
        <record model="gamification.challenge" id="challenge_one_hour_on_support_tickets">
            <field name="name">Spend 1 hour on support tickets</field>
            <field name="user_domain" eval="str([('groups_id', '=', ref('base.group_user'))])" />
            <field name="state">inprogress</field>
            <field name="reward_id" eval="ref('badge_one_hour_on_support_tickets')"/>
        </record>
        <record model="gamification.challenge.line" id="line_one_hour_on_support_tickets1">
            <field name="definition_id" eval="ref('definition_time_on_support_ticket')" />
            <field name="target_goal">1</field>
            <field name="challenge_id" eval="ref('challenge_one_hour_on_support_tickets')" />
        </record>
        
    </data>
</odoo>
